{
  "info": {
    "name": "Teste Condição de Pagamento - Correção de Campos",
    "description": "Scripts para testar a correção dos campos diasPrimeiraParcela, diasEntreParcelas, percentualJuros, percentualMulta e percentualDesconto"
  },
  "tests": [
    {
      "name": "1. Teste Básico - À Vista com Desconto",
      "method": "POST",
      "url": "{{base_url}}/condicoes-pagamento",
      "headers": {
        "Content-Type": "application/json"
      },
      "body": {
        "condicaoPagamento": "À Vista com 5% Desconto",
        "numeroParcelas": 1,
        "parcelas": 1,
        "ativo": true,
        "diasPrimeiraParcela": 0,
        "diasEntreParcelas": 0,
        "percentualJuros": 0.0,
        "percentualMulta": 0.0,
        "percentualDesconto": 5.0,
        "parcelasCondicaoPagamento": [
          {
            "numero": 1,
            "dias": 0,
            "percentual": 100.0,
            "formaPagamentoId": 5
          }
        ]
      },
      "description": "Testa uma condição à vista com desconto de 5%"
    },
    {
      "name": "2. Teste Parcelado - 2x com Juros",
      "method": "POST",
      "url": "{{base_url}}/condicoes-pagamento",
      "headers": {
        "Content-Type": "application/json"
      },
      "body": {
        "condicaoPagamento": "2x com 1.5% Juros",
        "numeroParcelas": 2,
        "parcelas": 2,
        "ativo": true,
        "diasPrimeiraParcela": 30,
        "diasEntreParcelas": 30,
        "percentualJuros": 1.5,
        "percentualMulta": 2.0,
        "percentualDesconto": 0.0,
        "parcelasCondicaoPagamento": [
          {
            "numero": 1,
            "dias": 30,
            "percentual": 50.0,
            "formaPagamentoId": 2
          },
          {
            "numero": 2,
            "dias": 60,
            "percentual": 50.0,
            "formaPagamentoId": 2
          }
        ]
      },
      "description": "Testa condição parcelada com juros e multa"
    },
    {
      "name": "3. Teste Complexo - 3x com Configurações Avançadas",
      "method": "POST",
      "url": "{{base_url}}/condicoes-pagamento",
      "headers": {
        "Content-Type": "application/json"
      },
      "body": {
        "condicaoPagamento": "3x Especial - 15/30/45 dias",
        "numeroParcelas": 3,
        "parcelas": 3,
        "ativo": true,
        "diasPrimeiraParcela": 15,
        "diasEntreParcelas": 15,
        "percentualJuros": 2.5,
        "percentualMulta": 3.0,
        "percentualDesconto": 0.0,
        "parcelasCondicaoPagamento": [
          {
            "numero": 1,
            "dias": 15,
            "percentual": 40.0,
            "formaPagamentoId": 4
          },
          {
            "numero": 2,
            "dias": 30,
            "percentual": 30.0,
            "formaPagamentoId": 2
          },
          {
            "numero": 3,
            "dias": 45,
            "percentual": 30.0,
            "formaPagamentoId": 2
          }
        ]
      },
      "description": "Testa condição com 3 parcelas e configurações avançadas"
    },
    {
      "name": "4. Teste Entrada + Parcelas - Com Desconto",
      "method": "POST",
      "url": "{{base_url}}/condicoes-pagamento",
      "headers": {
        "Content-Type": "application/json"
      },
      "body": {
        "condicaoPagamento": "Entrada + 2x - Desconto 3%",
        "numeroParcelas": 3,
        "parcelas": 3,
        "ativo": true,
        "diasPrimeiraParcela": 0,
        "diasEntreParcelas": 30,
        "percentualJuros": 0.0,
        "percentualMulta": 1.0,
        "percentualDesconto": 3.0,
        "parcelasCondicaoPagamento": [
          {
            "numero": 1,
            "dias": 0,
            "percentual": 50.0,
            "formaPagamentoId": 5
          },
          {
            "numero": 2,
            "dias": 30,
            "percentual": 25.0,
            "formaPagamentoId": 2
          },
          {
            "numero": 3,
            "dias": 60,
            "percentual": 25.0,
            "formaPagamentoId": 2
          }
        ]
      },
      "description": "Testa entrada + parcelas com desconto"
    },
    {
      "name": "5. Teste Atualização - PUT",
      "method": "PUT",
      "url": "{{base_url}}/condicoes-pagamento/1",
      "headers": {
        "Content-Type": "application/json"
      },
      "body": {
        "id": 1,
        "condicaoPagamento": "À Vista Atualizado - 10% Desconto",
        "numeroParcelas": 1,
        "parcelas": 1,
        "ativo": true,
        "diasPrimeiraParcela": 0,
        "diasEntreParcelas": 0,
        "percentualJuros": 0.0,
        "percentualMulta": 0.0,
        "percentualDesconto": 10.0,
        "parcelasCondicaoPagamento": [
          {
            "numero": 1,
            "dias": 0,
            "percentual": 100.0,
            "formaPagamentoId": 5
          }
        ]
      },
      "description": "Testa atualização de condição existente com desconto de 10%"
    }
  ],
  "variables": {
    "base_url": "http://localhost:8080",
    "description": "Configure a URL base do seu backend"
  },
  "instructions": [
    "1. Configure a variável {{base_url}} no Postman com a URL do seu backend",
    "2. Execute os testes na ordem para verificar se os campos estão sendo salvos corretamente",
    "3. Após cada POST, faça um GET para verificar se os valores foram salvos:",
    "   GET {{base_url}}/condicoes-pagamento",
    "4. Verifique se os campos diasPrimeiraParcela, diasEntreParcelas, percentualJuros, percentualMulta e percentualDesconto não estão mais zerados",
    "5. Para testar o PUT, primeiro execute os POSTs para ter dados para atualizar"
  ],
  "validation_queries": [
    {
      "name": "Verificar todos os registros",
      "method": "GET",
      "url": "{{base_url}}/condicoes-pagamento",
      "description": "Lista todas as condições de pagamento para verificar se os campos foram salvos corretamente"
    },
    {
      "name": "Verificar condição específica",
      "method": "GET", 
      "url": "{{base_url}}/condicoes-pagamento/{id}",
      "description": "Busca uma condição específica por ID (substitua {id} pelo ID desejado)"
    }
  ]
} 